# 📌 CIDRs - Classless Inter-Domain Routing

## 🧩 1️⃣ 정의

- IP 주소의 “네트워크 범위(Subnet)”를 표현하는 방법입니다.
- 일반적인 IP 주소에 “슬래시(/)”와 숫자를 붙여 네트워크 크기(Subnet Mask) 를 나타냅니다.

📘 기본 형태

```shell
192.168.0.0/16

구성요소        의미
192.168.0.0   네트워크 시작 주소 (Network Address)
/16           Prefix (네트워크 비트 수 = 서브넷 크기)
```

<br>

## 🧠 2️⃣ Prefix(슬래시 뒤 숫자)의 의미

- / 뒤 숫자가 클수록 → 네트워크는 작아지고, 호스트(사용 가능한 IP)는 적어집니다.

| CIDR    | Subnet Mask     | 사용 가능한 IP 수 | 범위 예시                 |
| ------- | --------------- | ----------------- | ------------------------- |
| **/8**  | 255.0.0.0       | 약 1,670만 개     | 10.0.0.0 ~ 10.255.255.255 |
| **/16** | 255.255.0.0     | 65,536개          | 10.0.0.0 ~ 10.0.255.255   |
| **/24** | 255.255.255.0   | 256개             | 10.0.0.0 ~ 10.0.0.255     |
| **/28** | 255.255.255.240 | 16개              | 10.0.0.0 ~ 10.0.0.15      |

<br>

⚙️ 일반적으로 AWS에서는

- VPC 범위 → /16
- Subnet 범위 → /24 또는 /20 로 설정합니다.

<br>

## ⚙️ 3️⃣ 실제 예시

| CIDR 블록       | 설명                                    |
| --------------- | --------------------------------------- |
| **10.0.0.0/16** | VPC 전체 네트워크 범위 (약 65,000 IP)   |
| **10.0.1.0/24** | Subnet 1 (256 IP 중 약 251개 사용 가능) |
| **10.0.2.0/24** | Subnet 2                                |
| **10.0.3.0/28** | 관리용 Subnet (16 IP)                   |

<br>

## 📦 4️⃣ AWS에서 CIDR 쓰이는 곳

| 서비스                    | 사용 예시                                                   |
| ------------------------- | ----------------------------------------------------------- |
| **VPC**                   | 10.0.0.0/16 (VPC 전체 네트워크 범위)                        |
| **Subnet**                | 10.0.1.0/24 (AZ 단위 Subnet)                                |
| **Security Group / NACL** | 허용 IP 범위 설정 (예: 0.0.0.0/0 → 전 세계 접근 허용)       |
| **Route Table**           | 목적지 CIDR 기반 라우팅 (예: 0.0.0.0/0 → 인터넷 게이트웨이) |
| **VPN / Peering**         | 피어링 VPC 간 CIDR 중복 불가                                |

## 🔐 5️⃣ 자주 쓰는 CIDR 표현

| CIDR               | 의미                     | 사용 예시                  |
| ------------------ | ------------------------ | -------------------------- |
| **0.0.0.0/0**      | 모든 IPv4 주소 (전 세계) | 전체 접근 허용 (보안 주의) |
| **::/0**           | 모든 IPv6 주소           | IPv6 전체 트래픽 허용      |
| **127.0.0.1/32**   | 루프백 주소 (자기 자신)  | 로컬 테스트                |
| **192.168.0.0/16** | 사설망 (Private IP 대역) | 내부 네트워크용            |
| **10.0.0.0/8**     | 사설망 (Private IP 대역) | AWS 기본 VPC 범위          |
| **172.16.0.0/12**  | 사설망 (Private IP 대역) | 기업 내부망용              |

## 🧮 6️⃣ IP 계산 방식 (간단 요약)

- IPv4 주소는 총 32비트입니다.
- CIDR의 “/숫자”는 그 중 네트워크 부분이 몇 비트인지를 의미합니다.

```shell
[10.0.0.0] = 00001010.00000000.00000000.00000000
Prefix /24 = 앞 24비트(3옥텟)는 네트워크, 뒤 8비트(1옥텟)는 호스트
→ 2^8 = 256개의 IP 가능
```
