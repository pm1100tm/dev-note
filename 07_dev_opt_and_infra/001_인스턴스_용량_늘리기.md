# π€ ν΄λΌμ°λ“ μΈμ¤ν„΄μ¤ μ©λ‰ λλ¦¬κΈ°

AWS EC2(Elastic Compute), λ‚ GCP μ GCE(Google Compute Engine) μ μ©λ‰μ΄ λ¨μλΌλ”
κ²½ν—μ΄ μμ—μµλ‹λ‹¤. μ©λ‰μ΄ λ¨μλ„ λ• λ”°λ΅ λ³Όλ¥¨μ„ λ§λ“¤κ³ (\*AWS κΈ°μ¤€ EBS λλ” EFS), ν•΄λ‹Ή λ””μ¤ν¬λ¥Ό
λ³Όλ¥¨ λ§μ΄νΈν•λ” λ°©λ²•λ„ μμ§€λ§, Boot Disk μ μ €μ¥ κ³µκ°„μ„ λ³€κ²½ν•΄μ•Ό ν•  κ²½μ°λ„ μμµλ‹λ‹¤.

μ—¬κΈ°μ„ λ‹¤λ£¨λ” κ²ƒμ€ GCP μ—μ„μ Book Disk μ μ €μ¥ κ³µκ°„μ„ λ³€κ²½ν•λ” λ°©λ²•μ…λ‹λ‹¤.

AWS λ„ λ³„λ° λ‹¤λ¥΄μ§€ μ•μΌλ‚, λ‹¤μμ— ν•΄λ³Ό κΈ°νκ°€ μƒκΈ°λ©΄ μ¶”κ°€μ μΌλ΅ ν¬μ¤ν… ν•΄λ³΄κ² μµλ‹λ‹¤.

<br>

## Boot Disk μ €μ¥ κ³µκ°„ λλ¦¬κΈ°

- μΌλ‹¨ Boot Disk μ λ…μ„ ν™•μΈν•κ³ , μ½μ†”μ—μ„ μ €μ¥ κ³µκ°„μ„ λλ ¤μ¤λ‹λ‹¤.
- CLI λ…λ Ήμ–΄λ΅ ν•λ” λ°©λ²•λ„ μμΌλ‚, μ—¬κΈ°μ„λ” μ½μ†”(GUI)λ΅ μ΅°μ‘ν•΄μ¤λ‹λ‹¤.

### Disks μ—μ„ λ¶€ν… λ””μ¤ν¬λ¥Ό ν΄λ¦­ν•μ—¬ λ“¤μ–΄κ°‘λ‹λ‹¤.

![gcp_boot_disk_increase](./assets/gcp_boot_disk_increase_1.png)

### μ •λ³΄λ¥Ό ν™•μΈν• ν›„ μƒλ‹¨μ Edit λ²„νΌ ν΄λ¦­

![gcp_boot_disk_increase](./assets/gcp_boot_disk_increase_2.png)

### Properties μ—μ„ Size λ¥Ό λ³€κ²½ν•κ³ , ν•λ‹¤μ μ €μ¥ λ²„νΌ ν΄λ¦­

![gcp_boot_disk_increase](./assets/gcp_boot_disk_increase_3.png)

<br>

## λ³€κ²½λ μ €μ¥ κ³µκ°„ ν™•μΈν•κΈ°

μ„μ μ½μ†” μ΅°μ‘μΌλ΅ Boot Disk μ μ €μ¥ κ³µκ°„μ€ λ³€κ²½λμ—μµλ‹λ‹¤.

- ν™•μΈν•κΈ°:

```shell
# μ§μ ‘ μΈμ¤ν„΄μ¤μ— λ“¤μ–΄κ°€μ„ ν™•μΈ
df -h

# CLI λ΅ ν™•μΈ
gcloud compute disks describe <DISK_NAME> --zone=<ZONE> | grep sizeGb

>> sizeGb: '50' # μ¶λ ¥ μμ‹
```

<br>

## λ³€κ²½ν• μ €μ¥ κ³µκ°„ μ μ©ν•κΈ°

- μ½μ†”μ—μ„ λλ ¤λ§ μ¤€λ‹¤κ³  λ°”λ΅ μ μ©λμ§€ μ•μµλ‹λ””.
- μ•„λμ μ μ°¨μ— λ”°λΌμ„, λ³€κ²½ν• μ €μ¥ κ³µκ°„μ„ μ μ©ν•΄μ¤λ‹λ‹¤.

### 1. OSμ—μ„ νν‹°μ… ν™•μΈ

```shell
> lsblk

NAME    MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
sda       8:0    0   50G  0 disk
β”β”€sda1    8:1    0 49.9G  0 part /
β”β”€sda14   8:14   0    3M  0 part
β””β”€sda15   8:15   0  124M  0 part /boot/efi
sdb       8:16   0  100G  0 disk /mnt/disks/ssd-data

# λ””μ¤ν¬(sda)λ” 50GB, νν‹°μ…(sda1)μ€ μ•„μ§ 49.9G λ΅ λμ–΄μμµλ‹λ‹¤.
# μ›λ κΈ°λ³Έ 30GB μ€κ³ , ν„μ¬ μ μ© μ™„λ£ν•μ—¬ 49.9G λ΅ λλ¦° μμΉκ°€ ν‘μ‹λκ³  μμµλ‹λ‹¤.
# - sda1, sda14, sda15 λ” νν‹°μ…μ…λ‹λ‹¤.
# - sdb λ” SSD 100GB λ¥Ό λ³Όλ¥¨ λ§μ΄νΈν• λ””μ¤ν¬μ…λ‹λ‹¤.
```

### 2. νν‹°μ… ν™•μ¥ (Debian/Ubuntu κΈ°μ¤€)

```shell
> sudo growpart /dev/sda 1

# μ„±κ³µ μ‹ λ©”μ‹μ§€ μμ‹:
CHANGED: partition=1 start=4096 old: size=62910461 end=62914557 new: size=104855997 end=104859093
```

#### growpart λ…λ Ήμ–΄λ¥Ό μ°Ύμ„ μ μ—†λ‹¤λ©΄ μ„¤μΉ

- μΌλ° os λ¥Ό ν™•μΈν•κ³ , κ·Έμ— λ§λ” λ…λ Ήμ–΄λ΅ μ„¤μΉν•©λ‹λ‹¤.
- π” growpartλ” cloud-guest-utils ν¨ν‚¤μ§€ μ•μ— λ“¤μ–΄ μμµλ‹λ‹¤.

```shell
> cat /etc/os-release # OS ν™•μΈ λ…λ Ήμ–΄
> lsb_release -a # μ΄ λ…λ Ήμ–΄λ΅λ„ ν™•μΈ κ°€λ¥

> sudo apt update
> sudo apt install cloud-guest-utils -y
```

### 3. νμΌμ‹μ¤ν… ν™•μ¥

- Debian κΈ°λ³Έ νμΌμ‹μ¤ν…μ€ ext4

```shell
## ext4 νμΌμ‹μ¤ν…μΈ κ²½μ°
> sudo resize2fs /dev/sda1

## xfs νμΌμ‹μ¤ν…μΈ κ²½μ° (RHEL/CentOS)
> sudo xfs_growfs -d /
```

### 4. ν™•μΈ

```shell
df -h

Filesystem Size Used Avail Use% Mounted on
/dev/sda1 50G 10G 40G 20% /
```

π‰ μ΄μ  μ •μƒμ μΌλ΅ 50GB λ΅ ν‘μ‹λ©λ‹λ‹¤.

<br>

---

## π‘‰ μ©λ‰μ„ μ¤„μ΄λ”κ±΄ λ¶κ°€λ¥(AWS, GCP λ‘ λ‹¤ λ™μΌ)

- GCEμ Persistent Diskλ” ν•μ΄νΌλ°”μ΄μ € λ λ²¨μ—μ„ κ΄€λ¦¬λλ” λΈ”λ΅ μ¤ν† λ¦¬μ§€
- λ””μ¤ν¬λ¥Ό μ¶•μ†ν•λ ¤λ©΄ νμΌμ‹μ¤ν…λΏ μ•„λ‹λΌ ν•μ„ λΈ”λ΅ λ λ²¨μ—μ„λ„ λ°μ΄ν„° μ†μ‹¤ μ—†μ΄ μ¬λ°°μΉκ°€ ν•„μ”
- AWS μ—μ„λ„ λ™μΌ

> μ¦‰, β€λλ¦¬λ” κ±΄ μ•μ „ν•μ§€λ§, μ¤„μ΄λ” κ±΄ λ°μ΄ν„°κ°€ λ‚ μ•„κ° μ μμ–΄μ„ κΈμ§€β€ λμ–΄ μμµλ‹λ‹¤.

λ€μ•μ€, μƒλ΅μ΄ λ””μ¤ν¬λ¥Ό λ§λ“¤μ–΄μ„ λ°μ΄ν„°λ§ λ³µμ‚¬ν•λ” λ°©λ²•μ΄ μ μΌν•κ² μ•μ „ν•κ³  κ³µμ‹μ μΈ λ°©λ²•μ…λ‹λ‹¤.
