# ğŸš€ Elastic IP Setting(íƒ„ë ¥ì  IP ì„¤ì •)

## ğŸ“š ê°œë… ì´í•´

íƒ„ë ¥ì  IP(Elastic IP, EIP)ëŠ” AWSê°€ ì œê³µí•˜ëŠ” ê³ ì • í¼ë¸”ë¦­ IPv4 ì£¼ì†Œì…ë‹ˆë‹¤.
ì¼ë°˜ì ìœ¼ë¡œ EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê»ë‹¤ ì¼°ë‹¤ í•˜ë©´ í¼ë¸”ë¦­ IPê°€ ë³€ê²½ë˜ëŠ”ë°, EIP ë¥¼ í• ë‹¹í•˜ë©´ IPê°€ ê³ ì •ë˜ì–´,
DNS ì„¤ì •ì´ë‚˜ ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—°ë™ì— ìœ ë¦¬í•©ë‹ˆë‹¤.

AWS ê³„ì • ë‹¨ìœ„ë¡œ ê´€ë¦¬ë˜ë©°, ì¸ìŠ¤í„´ìŠ¤ì™€ ì—°ê²°í•˜ê±°ë‚˜ í•´ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### íŠ¹ì§•

- ê³ ì •ì„±: ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì¬ë¶€íŒ…/ì •ì§€í•´ë„ IPê°€ ë³€í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
- ìœ ì—°ì„±: í•„ìš”ì‹œ ë‹¤ë¥¸ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì¦‰ì‹œ ì¬í• ë‹¹ ê°€ëŠ¥í•©ë‹ˆë‹¤.
- ë¹„ìš©: ì¸ìŠ¤í„´ìŠ¤ì™€ ì—°ê²° ì¤‘ì¼ ë•ŒëŠ” ë¬´ë£Œ(í•œ ê°œ ê¹Œì§€)ì´ë©°, ì—°ê²°ë˜ì§€ ì•Šì€ ìƒíƒœë¡œ ë‘ë©´ ìš”ê¸ˆì´ ë¶€ê³¼ë©ë‹ˆë‹¤.

## ì„¤ì • ë°©ë²•

- AWS Management Console ì ‘ì† â†’ EC2 ì„œë¹„ìŠ¤ ì„ íƒ
- ì™¼ìª½ ë©”ë‰´ì—ì„œ â€œElastic IPsâ€ (íƒ„ë ¥ì  IP) ì„ íƒ
- ìƒë‹¨ì˜ Allocate Elastic IP address (íƒ„ë ¥ì  IP ì£¼ì†Œ í• ë‹¹) í´ë¦­
- ë„¤íŠ¸ì›Œí¬(ì¼ë°˜ì ìœ¼ë¡œ VPC) ì„ íƒ í›„ í• ë‹¹ ë²„íŠ¼ í´ë¦­
- ìƒˆë¡œìš´ ê³ ì • í¼ë¸”ë¦­ IP ìƒì„± í™•ì¸
- ìƒì„±í•œ EIPë¥¼ ì„ íƒí•˜ê³ , ìƒë‹¨ì˜ Actions
  â†’ Associate Elastic IP address (íƒ„ë ¥ì  IP ì£¼ì†Œ ì—°ê²°) í´ë¦­
- ì—°ê²°í•  ë¦¬ì†ŒìŠ¤ë¡œ EC2 ì¸ìŠ¤í„´ìŠ¤ ì„ íƒ
- ëŒ€ìƒ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì§€ì • í›„ ì—°ê²°(Associate)
- EC2 ì¸ìŠ¤í„´ìŠ¤ ìƒì„¸ ì •ë³´ì—ì„œ í¼ë¸”ë¦­ IPv4 ì£¼ì†Œê°€ EIP ë¡œ ë³€ê²½ë˜ì—ˆëŠ”ì§€ í™•ì¸

### â“ í”„ë¼ì´ë¹— IP ì£¼ì†Œ ì—°ê²°(Private IP Association)

EC2 ì¸ìŠ¤í„´ìŠ¤ëŠ” VPC ë‚´ë¶€ì—ì„œë§Œ ë³´ì´ëŠ” í”„ë¼ì´ë¹— IPë¥¼ ê°€ì§€ê³  ìˆê³ , ì™¸ë¶€ ì¸í„°ë„·ê³¼ ì—°ê²°ë˜ë ¤ë©´ í¼ë¸”ë¦­ IPê°€
í•„ìš”í•©ë‹ˆë‹¤. EIP ë¥¼ í• ë‹¹í•  ë•Œ ì–´ë–¤ í”„ë¼ì´ë¹— IPì— ì—°ê²°í• ì§€ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤.

ì™œ í•„ìš”í•œê°€?

- í•œ EC2 ì¸ìŠ¤í„´ìŠ¤ëŠ” ì—¬ëŸ¬ ê°œì˜ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤(ENI)ì™€ í”„ë¼ì´ë¹— IPë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ë”°ë¼ì„œ, AWSëŠ” ì´ EIP ë¥¼ ì¸ìŠ¤í„´ìŠ¤ì˜ ì–´ë–¤ í”„ë¼ì´ë¹— IPì— ë§¤í•‘í• ê¹Œë¥¼ ë°˜ë“œì‹œ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤.
- ë³´í†µì€ ê¸°ë³¸(primary) í”„ë¼ì´ë¹— IPì— ì—°ê²°í•˜ë©´ ë˜ê³ , ë©€í‹° IP í™˜ê²½ì´ ì•„ë‹ˆë¼ë©´ ìë™ì„ íƒìœ¼ë¡œ ë‘ì–´ë„ ë©ë‹ˆë‹¤.

### â“ ì¬ì—°ê²° ì„¤ì •(Allow Reassociation)

ê°œë…

- ê¸°ë³¸ì ìœ¼ë¡œ í•œ ê°œì˜ EIPëŠ” í•œ ë²ˆì— í•˜ë‚˜ì˜ í”„ë¼ì´ë¹— IP/ENI ì—ë§Œ ì—°ê²°ë©ë‹ˆë‹¤.
- ì¬ì—°ê²° í—ˆìš© ì˜µì…˜ì„ ì¼œë©´ ê°™ì€ EIPë¥¼ ë‹¤ë¥¸ ì¸ìŠ¤í„´ìŠ¤ ë˜ëŠ” ENI ì— ì¬ì—°ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì˜ˆì‹œ
â€¢ EIP 203.0.113.25ë¥¼ ì¸ìŠ¤í„´ìŠ¤ Aì— ì—°ê²°í–ˆë‹¤ê°€,
â€¢ ë‚˜ì¤‘ì— ì¸ìŠ¤í„´ìŠ¤ Bì— ë¶™ì´ê³  ì‹¶ì„ ë•Œ,
â€¢ ì´ ì˜µì…˜ì´ ì¼œì ¸ ìˆìœ¼ë©´ ë°”ë¡œ ì¬í• ë‹¹ ê°€ëŠ¥í•©ë‹ˆë‹¤.

> ì´ ì˜µì…˜ì´ êº¼ì ¸ ìˆìœ¼ë©´ ê¸°ì¡´ ì—°ê²°ì„ ë¨¼ì € ìˆ˜ë™ìœ¼ë¡œ í•´ì œí•´ì•¼ë§Œ ë‹¤ë¥¸ ì¸ìŠ¤í„´ìŠ¤ì— ì—°ê²°í•  ìˆ˜ ìˆìŒ

### ìŠ¤í¬ë¦°ìƒ·

![íƒ„ë ¥ì  IP ì„¤ì • 1](./assets/elastic_ip/elastic_ip_001.png)
![íƒ„ë ¥ì  IP ì„¤ì • 2](./assets/elastic_ip/elastic_ip_002.png)
![íƒ„ë ¥ì  IP ì„¤ì • 3](./assets/elastic_ip/elastic_ip_003.png)
![íƒ„ë ¥ì  IP ì„¤ì • 4](./assets/elastic_ip/elastic_ip_004.png)
![íƒ„ë ¥ì  IP ì„¤ì • 5](./assets/elastic_ip/elastic_ip_005.png)
![íƒ„ë ¥ì  IP ì„¤ì • 6](./assets/elastic_ip/elastic_ip_006.png)

---

## AWS CLI ê¸°ì¤€

```shell
# 1. íƒ„ë ¥ì  IP í• ë‹¹
aws ec2 allocate-address --domain vpc

# ì¶œë ¥ ì˜ˆì‹œ:
# {
#   "PublicIp": "203.0.113.25",
#   "AllocationId": "eipalloc-1234567890abcdef0"
# }

# 2. í• ë‹¹í•œ EIPë¥¼ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì—°ê²°
aws ec2 associate-address \
    --instance-id i-1234567890abcdef0 \
    --allocation-id eipalloc-1234567890abcdef0

# 3. ì—°ê²° í•´ì œ
aws ec2 disassociate-address --association-id eipassoc-12345678
```

### ë‚´ ê³„ì •ì—ì„œ ìƒì„±ëœ EIP ëª©ë¡ ë³´ê¸°

```shell
aws ec2 describe-addresses \
  --query "Addresses[*].{PublicIp:PublicIp, AllocationId:AllocationId, InstanceId:InstanceId}" \
  --output table

-----------------------------------------------------------------------
|                          DescribeAddresses                          |
+-----------------------------+-----------------------+---------------+
|        AllocationId         |      InstanceId       |   PublicIp    |
+-----------------------------+-----------------------+---------------+
|  eipalloc-***************** |  i-0d1**************  |  3.~~.~~~.~~~ |
|  eipalloc-***************** |  i-0ca**************  |  3.~~.~~~.~~~ |
+-----------------------------+-----------------------+---------------+
(END)
```
